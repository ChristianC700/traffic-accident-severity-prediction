# Paths
raw_csv_path: "data/raw/US_Accidents_March23.csv"
output_dir: "data/processed"
reports_dir: "reports"

# Columns
target_column: "Severity"          # 1..4 classes
id_columns: ["ID"]
datetime_columns: ["Start_Time", "End_Time"]
drop_columns: []                   # force-drop
allowlist_only: false              # if true, keep only selected_features below

# Feature selection (aligns with proposal)
selected_features:
  - Severity
  - Start_Time
  - End_Time
  - Distance(mi)
  - Start_Lat
  - Start_Lng
  - Weather_Condition
  - Temperature(F)
  - Visibility(mi)
  - Wind_Speed(mph)
  - Precipitation(in)
  - Sunrise_Sunset
  - Traffic_Signal
  - Junction
  - Crossing

# Time feature engineering
make_duration: true                # End_Time - Start_Time -> duration_min
time_features:
  hour: true
  dow: true
  month: true
cyclical_encode: true              # sin/cos encoding

# Missingness & filtering
max_missing_col_fraction: 0.6
drop_rows_with_missing_target: true

# Data sampling
sample_n_rows: null        # Ignored when samples_per_class is set
sample_fraction: null
data_sampling:
  minority_oversample: true  # Enable balanced class sampling
  samples_per_class: {1: 30000, 2: 30000, 3: 30000, 4: 30000}  # Target count per class (stops early when met)


# Split
test_size: 0.15
val_size: 0.15
stratify: true

# keep output sparse-friendly
scale_numeric: false       # avoids dense scaling
ohe_min_freq: 20           # bucket rare categories; reduces OHE width

# IO/perf
n_jobs: -1

# Class merging
merge_classes:
  enabled: false
  mapping: {1: 2, 4: 3}  # merge 1→2, 4→3

# Class weights and focal loss
# DISABLED: Dataset is already balanced, so focal loss and class weights are unnecessary
# (inverse_freq/balanced will compute equal weights anyway with balanced data)
class_weights:
  strategy: "uniform"  # inverse_freq, balanced, uniform - "uniform" explicitly shows equal weights
  focal_loss_gamma: null  # null to disable, or set to 2.0 for focal loss - disabled for balanced datasets

# Logistic Regression optimization
logreg:
  solver: "auto"  # auto, saga, lbfgs, liblinear
  max_iter: 1000
  tol: 1e-4

# Hyperparameter tuning
hyperparameter_tuning:
  linearsvc:
    enabled: false
    method: "grid"  # grid or random
    cv_folds: 3
  rf:
    enabled: false
    n_iter: 20
    cv_folds: 3

# MLP configuration
mlp:
  hidden_dims: [256, 128]  # list of layer sizes
  dropout: 0.3
  activation: "relu"  # relu, gelu, swish
  batch_norm: true
  batch_size: 1024
  epochs: 15
  lr: 0.001
  weight_decay: 0.0001
  balanced_sampling: false  # use WeightedRandomSampler - DISABLED: dataset is already balanced
  lr_schedule: "plateau"  # plateau, cosine, none
  early_stopping:
    enabled: true
    patience: 5
    min_delta: 0.001

# Cost-sensitive learning
cost_matrix:
  enabled: false
  # Cost of predicting class i when true is class j (rows=true, cols=pred)
  matrix: [[0, 1, 2, 10],   # true=1: cost of predicting 1,2,3,4
           [1, 0, 1, 5],    # true=2
           [2, 1, 0, 3],    # true=3
           [10, 5, 3, 0]]   # true=4